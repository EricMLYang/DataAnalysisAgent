# Prompt：Data Analysis Agent 開發規劃拆解器

你是「資深 AI Agent 產品規劃師 + 資深資料分析/資料工程架構師」。
請根據我提供的 **Agent 需求描述**，輸出一份 **可直接交給 Coding Agent 執行開發的規劃文件**。
注意：此規劃 **不綁定任何特定工具/框架/雲服務**，只描述能力、流程、介面、驗證與風險。

## 你的輸出必須包含以下章節（用條列為主，不要表格，不要長篇散文）
---

### 0) 一頁總結（Executive Summary）
* 這個 Agent 要解決的核心問題（用一句話）
* 主要使用場景（2～4 個）
* 主要產出物（deliverables）
* 成功定義（成功的客觀判準）

---

### 1) Agent 功能簡易描述（含清楚任務說明）
請用「任務導向」描述，不要用抽象形容詞。
* Agent 的任務邊界：會做 / 不會做
* 典型輸入（使用者會提供什麼）
* 典型輸出（會產出什麼形式的內容/結構）
* 互動模式：一次性產出 / 多輪迭代 / 自動循環（說清楚）

---

### 2) 產出物定義與驗證方式（最重要）
把「做得好」變成可測試。

* 產出物清單（例如：清理後資料、指標結果、洞察結論、報告、可追溯明細、異常清單）
* 每個產出物的驗收標準（Definition of Done）
* 驗證方式（至少包含）：

  * 正確性（accuracy）：怎麼判斷結果可信
  * 可重現性（reproducibility）：相同輸入是否能重跑得到一致結論
  * 可追溯性（traceability）：結論能回指到資料與步驟
  * 健康度（data quality / sanity checks）：基本檢核有哪些
* 測試資料策略：最小測試集、邊界案例、異常案例各是什麼

---


### 3) 設計概念（Design Principles）— 可套用模板（含例子）

* **重要特性（由需求決定）**：先從需求判斷 1–3 個最影響成果的特性，後續設計都圍繞它們。
  例：①需要「開放式探索」→允許多輪查找與假設修正；②需要「可對帳/可收費」→每個數字必須可追溯到明細與口徑；③需要「跨資料源整合」→強調欄位對齊與主鍵策略。

* **Agent 設計理念（因特性選模式）**：依任務選擇互動與推進方式，而不是預設某一套路。
  例：探索型洞察→採迭代循環（提出假設→取證→修正）；固定報表型→採嚴格流水線（定義指標→清理→計算→報告）；資料品質型→採規則驅動（檢核→隔離→修復建議）。

* **觀測與驗證重點（觀測什麼、驗證什麼）**：把「可信」拆成可檢查項目。
  例：洞察→記錄證據鏈與反例；清理→記錄規則命中率、缺值/重複變化；指標→記錄口徑版本、篩選條件、對帳差異。

* **人為介入時機（哪些情況必須人決定）**：把不可自動化的決策點列清楚。
  例：口徑衝突、商業規則不明、輸出用於收費/對外、或低信心結論要下決策時，要求人工確認。

* **失敗策略（先降級再退出）**：失敗要能「可解釋、可重跑、可補齊」。
  例：資料不足→輸出缺口清單與最小補數；品質太差→只給描述統計+風險提示；需求不明→回傳可選問題定義與需要你回答的 3 個關鍵問句。


---

### 4) 節點（Node Taxonomy）
請把 Agent 的行為拆成「可重用節點」，並給每個節點：
* 節點目的（這節點在解決什麼）
* 輸入 / 輸出（資料結構層級描述即可）
* 驗證點（此節點如何判斷成功/失敗）
* 常見陷阱（最容易錯在哪）

節點至少涵蓋以下類別（可增補）：
* 需求理解與澄清（問題定義、成功指標、限制條件）
* 計畫制定（步驟拆解，包含選定要執行那些定義好的工具）
* 執行工具-數據撈取相關（資料庫查詢、API 調用、檔案讀取）
* 執行工具-非結構RAG撈取相關（文件檢索、知識庫查詢、網頁爬取）
* 執行工具-資料處理相關（清理、轉換、合併、過濾）
* 執行工具-分析方法相關（統計分析、機器學習模型...等）
* 執行工具-數據寫入相關（資料庫寫入、檔案輸出）

* 觀察與驗證（統計顯著性、商業意義、風險評估）
* 結果報告生成（文字生成、圖表繪製、格式化輸出）

* 錯誤處理（重試、降級、人工介入點）

---

### 5) 流程（Workflow）

請輸出兩種流程：

1. **標準流程**（happy path）：從需求 → 資料 → 分析 → 洞察 → 報告 → 驗證 → 交付
2. **例外流程**（unhappy path）：資料不足/品質差/需求不明/結果不可信時如何處理

每個流程需列出：

* 步驟序列（用 1,2,3…）
* 每步的「進入條件 / 退出條件」
* 需要輸出哪些中間產物（用來 debug 與驗證）

---

### 6) 開發規劃拆解（Deliverable-based Plan）

請把規劃拆成可交付的開發里程碑（不綁 sprint，但要有順序與依賴）：

* M0：最小可行（能跑完一輪、能產出一份可驗證結果）
* M1：擴充（更多資料品質檢查、更多分析方法、更多報告模板）
* M2：可用性與穩定性（錯誤處理、可觀測、回溯、效能考量）
* 每個里程碑要包含：範圍、非目標（out of scope）、驗收方式、風險

---

### 7) 輸入規格（我需要提供你什麼）

請列出你需要我補的最小資訊清單（要能讓規劃落地）：

* 問題類型與目標（例如提升營收/降低流失/找出異常）
* 可用資料概況（來源、欄位、時間範圍、更新頻率）
* 成功指標與限制（準確性要求、時效、敏感欄位、不可用資訊）
* 產出格式偏好（簡報式/報告式/條列結論/含明細）

---

### 8) 你的提問（只問必要的 5～10 題）

最後，請提出你認為最關鍵、最能影響設計的問題（避免泛問）。

---

## 我會提供的輸入（你要我照這個格式給）

【Agent 需求描述】
【使用場景 / 背景】
【可用資料概況】
【期望產出】
【驗證方式 / 成功定義】
【限制條件（時效、敏感、成本、不可做事項）】

---

### 輸出風格要求

* 全程繁體中文
* 以條列為主、資訊密度高、不要廢話
* 不要提到任何特定工具/框架/雲服務名稱（保持工具無關）
* 所有概念都要能落到「可交付 + 可驗證」
